# カスタム指示

Repomix は、自然言語による指示に基づいてコードの分析や変更を行いますが、より具体的なルールやガイドラインを適用したい場合があります。カスタム指示機能を使用すると、ユーザーが定義したルールを Repomix に適用できます。このドキュメントでは、カスタム指示の作成方法と使用方法について説明します。

## カスタム指示ファイルの作成

カスタム指示は、テキストファイルに記述します。ファイルには、Repomix に実行させたい処理を具体的な言葉で記述します。

例：`custom_instructions.txt`

```
- すべての関数には、処理内容を説明する JSDoc コメントを追加してください。
- 変数名は、キャメルケース（例：myVariable）を使用してください。
- console.log の使用は避けてください。代わりに、専用のロガーを使用してください。
```

## カスタム指示ファイルの指定

カスタム指示ファイルは、コマンドラインオプションまたは設定ファイルを通じて Repomix に指定できます。

### コマンドラインオプション

コマンドラインから Repomix を実行する際に、`--custom-instructions` オプションにカスタム指示ファイルのパスを指定します。

```bash
repomix src/ --custom-instructions custom_instructions.txt
```

このコマンドを実行すると、`src/` ディレクトリ内のすべてのファイルに対して、`custom_instructions.txt` に記述された指示が適用されます。

### 設定ファイル

設定ファイル (`repomix.config.json`) で `customInstructions` オプションにカスタム指示ファイルのパスを設定することもできます。

```json
{
  "customInstructions": "custom_instructions.txt"
}
```

設定ファイルを有効にした場合、`--custom-instructions` オプションを明示的に指定しなくても、Repomix は自動的にカスタム指示を適用します。

## カスタム指示の記述ルール

カスタム指示は、Repomix が理解できる自然な言葉で記述する必要があります。具体的なルールやガイドラインを明確に記述することで、Repomix は意図したとおりにコードを処理できます。

- **明確かつ簡潔に:** 指示は、曖昧さを避け、具体的かつ簡潔に記述してください。
- **箇条書き:** 複数の指示がある場合は、箇条書きで記述すると読みやすくなります。
- **具体的な例:** 必要に応じて、具体的なコード例を交えて説明すると、Repomix の理解を助けられます。

## カスタム指示の適用例

### コーディング規約の適用

```
- インデントはスペース 2 つを使用してください。
- 行末にはセミコロンを付けてください。
- 文字列にはシングルクォートを使用してください。
```

### セキュリティルールの適用

```
- eval 関数の使用は禁止してください。
- 外部からの入力をそのまま使用しないでください。必ずサニタイズ処理を行ってください。
```

### ドキュメンテーションルールの適用

```
- すべての関数には、引数、戻り値、処理内容を記述した JSDoc コメントを追加してください。
- クラスには、概要を説明するコメントを追加してください。
```

## 複数のカスタム指示の組み合わせ

複数のカスタム指示ファイルを指定することはできませんが、1 つのファイルに複数の指示を記述することで、複数のルールを組み合わせることができます。

## カスタム指示の注意点

- **指示の複雑さ:** 複雑すぎる指示は、Repomix が正しく理解できない場合があります。指示は、できるだけシンプルに保つようにしてください。
- **指示の矛盾:** 複数の指示が矛盾する場合、Repomix の動作が予測不能になる可能性があります。指示間に矛盾がないか確認してください。
- **パフォーマンス:** 過度に複雑な指示は、処理時間を増加させる可能性があります。

## まとめ

カスタム指示機能を活用することで、Repomix をより強力なツールとして活用できます。プロジェクトのコーディング規約やセキュリティポリシーに合わせてカスタム指示を作成し、コードの品質向上に役立ててください。
